---
title: Vercel开源bash-tool：基于文件系统的上下文检索工具，优化AI Agent性能
title_original: Introducing bash-tool for filesystem-based context retrieval - Vercel
date: '2026-01-07'
source: Vercel Blog
source_url: https://vercel.com/changelog/introducing-bash-tool-for-filesystem-based-context-retrieval
author: ''
summary: Vercel开源了bash-tool，这是一个专为文本转SQL Agent设计的Bash执行引擎。它通过允许Agent运行类Bash命令（如find、grep）在本地文件系统中按需检索小型上下文片段，而非将所有文本塞入提示词，从而显著减少Token消耗、提升响应准确性与整体性能。该工具构建于just-bash之上，无需额外shell进程，支持内存或沙箱环境运行，可与AI
  SDK集成，帮助开发者构建更高效的文件系统感知型Agent。
categories:
- AI基础设施
tags:
- Vercel
- AI Agent
- 上下文检索
- 开源工具
- 性能优化
draft: false
translated_at: '2026-01-08T04:45:26.621803'
---

我们开源了 `bash-tool`，这是我们最近重新架构的文本转SQL Agent所使用的Bash执行引擎，旨在减少Token使用量、提升Agent响应的准确性并改善其整体性能。

`bash-tool` 为您的Agent提供了一种通过运行类Bash命令来查找正确上下文的方法，然后仅将这些工具调用的结果返回给模型。

如果将大量文本包含在提示词中，上下文窗口会很快被填满。由于Agent通常能很好地处理类似 `find`、`grep`、`jq` 和管道等Unix风格的工作流，现在借助 `bash-tool`，您可以将大型上下文**本地**保存在文件系统中，并让Agent使用这些命令按需检索较小的上下文片段。

`bash-tool` 为AI SDK Agent提供了 `bash`、`readFile` 和 `writeFile` 工具，支持在内存中和沙箱环境中运行，并且：

- 构建于 `just-bash` 之上，后者直接在TypeScript中解释Bash脚本，无需shell进程或任意二进制执行
- 您可以在启动时将您的文件预加载到该文件系统中，这样您的Agent就可以在需要时搜索它们，而无需将所有内容粘贴到提示词中
- 它支持在内存中或自定义的隔离虚拟机中运行

```
1import { createBashTool } from "bash-tool";2
3const { tools } = await createBashTool({4  files: { "src/index.ts": "export const hello = 'world';" },5});6
7const agent = new ToolLoopAgent({ model, tools });
```

在内存文件系统中使用 bash-tool

如果您需要真实的shell、真实的文件系统或自定义二进制文件，您可以针对兼容Sandbox的API运行相同的工具，以获得完整的虚拟机隔离。

```
1import { createBashTool } from "bash-tool";2import { Sandbox } from "@vercel/sandbox";3const sandbox = await Sandbox.create();4
5const { tools } = await createBashTool({ sandbox });6
```

在 Vercel 沙箱中使用 bash-tool

在您的Agent中尝试 bash-tool

安装该软件包以及AI SDK v6，开始构建您的文件系统Agent。

> 本文由AI自动翻译，原文链接：[Introducing bash-tool for filesystem-based context retrieval - Vercel](https://vercel.com/changelog/introducing-bash-tool-for-filesystem-based-context-retrieval)
> 
> 翻译时间：2026-01-08 04:45
