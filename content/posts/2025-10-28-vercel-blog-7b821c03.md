---
title: Vercel Functions 现已支持 Bun 运行时，性能提升显著
title_original: Bun runtime on Vercel Functions - Vercel
date: '2025-10-28'
source: Vercel Blog
source_url: https://vercel.com/blog/bun-runtime-on-vercel-functions
author: ''
summary: Vercel 宣布在 Functions 中公测支持 Bun 运行时，用户可在 Node.js 与 Bun 之间灵活选择。内部测试显示，在受 CPU
  限制的 Next.js 渲染场景下，Bun 平均延迟降低 28%。该性能提升源于 Bun 基于 Zig 构建的运行时架构，优化了 I/O 与调度。目前支持 Next.js、Express、Hono
  和 Nitro 框架，通过 vercel.json 配置即可启用，并集成 Vercel 的可观测性服务。Bun 运行在 Fluid 计算上，采用 Active
  CPU 定价，仅为代码执行时间付费。
categories:
- AI基础设施
tags:
- Vercel
- Bun
- Serverless
- 性能优化
- 云计算
draft: false
translated_at: '2026-02-08T04:37:19.405562'
---

我们现在支持将 **Bun** 作为 Vercel Functions 的一个运行时选项，现已进入公测阶段。您可以为项目在 Node.js 和 Bun 之间进行选择，根据工作负载配置运行时行为。我们正与 Bun 团队紧密合作，以将此功能推向生产环境。

这种灵活性使您能够为具体用例选择最佳方案。对于需要最大兼容性的场景使用 Node.js，或者为受益于更快执行速度的计算密集型应用切换到 Bun。

通过内部测试，我们发现，在受 CPU 限制的 Next.js 渲染工作负载中，与 Node.js 相比，Bun 将平均延迟降低了 28%。

这些性能提升源于 Bun 的运行时架构，它使用 Zig 语言构建，并优化了 I/O 和调度，从而减少了 JavaScript 执行和数据处理的系统开销。

## 如何使用 Bun 运行时

目前，**Bun** 运行时支持 **Next.js**、**Express**、**Hono** 和 **Nitro**，对其他框架的支持即将推出。

要为整个项目启用 Bun，请在您的 `vercel.json` 文件中添加 `bunVersion` 设置：

```
1{2  "bunVersion": "1.x"3}
```

通过在 vercel.json 中添加 bunVersion 来启用 Bun 运行时支持

此配置将在整个部署中应用 Bun，并自动与 Vercel 的可观测性、日志记录和监控基础设施集成。

Bun 支持零配置的 TypeScript。以下是一个使用 Hono 创建简单 API 的示例：

```
1import { Hono } from 'hono';2
3const app = new Hono();4
5app.get('/', (c) => {6  return c.text(`Hello from Hono on Bun ${process.versions.bun}!`);7});8
9export default app;
```

在 Vercel 上使用 Bun 运行时的 Hono Hello World 端点

您也可以使用我们的一个入门模板开始：

- Express on Bun
- Hono on Bun

Express on Bun

Hono on Bun

Bun 运行时运行在 **Fluid 计算** 上，它能在同一实例上处理多个并发请求。**Active CPU 定价** 意味着您只需为执行代码的时间付费，而不是为等待响应的挂钟时间付费。如果您的函数正在等待数据库查询或 API 调用，您无需为那段等待时间付费。

## 为什么运行时选择很重要

应用程序处理不同类型的工作负载。有些执行繁重的计算，有些处理高请求量或流式传输大响应。为您的应用程序选择合适的运行时，可以让您针对最重要的方面进行优化。

Bun 通过一个注重安全的系统语言，提供了低延迟性能、高效的流式处理以及强大的内置 API；而 Node.js 则为各种用例提供了无与伦比的生态系统成熟度和广泛的兼容性。选择取决于您应用程序的优先级。

由于 Vercel 运行原生的 Node.js 和 Bun 运行时，代码的运行方式与本地完全相同。没有模拟或兼容层，只有对每个运行时原生功能的完全访问。在它们之间切换只需在 `vercel.json` 中进行配置更改。

## 基准测试结果

最近，独立开发者 **Theo Browne** 发布了 **全面的基准测试**，测试了服务器端渲染（Next.js、React、SvelteKit）和计算工作负载的 CPU 性能，比较了 Cloudflare Workers 和 Vercel Functions。我们在 **之前的文章** 中分析了这些结果。

我们感谢 Theo 的这项工作。此类努力揭示了关于运行时性能的宝贵见解，健康的竞争有助于推动整个生态系统向前发展，使所有人受益。

在最初的基准测试之后，整个生态系统都进行了改进。Cloudflare 优化了其调度算法和 V8 垃圾回收调优，并 **向 Node.js 提交了一个 PR**，启用了一个能改进数学运算的 V8 标志。OpenNext 方面的工作提高了 Next.js 在替代托管环境中的性能。我们分析了我们的基础设施，并发现了 Node.js Web Streams 实现中的瓶颈。

### 性能分析时的测量内容

最初的基准测试测量了首字节时间（TTFB），它捕获了服务器开始发送响应的时间，但没有包含生成和传输响应的全部成本。基准测试已更新为测量总请求持续时间（末字节时间）。对于服务器渲染工作负载，这更能准确地代表用户体验，因为它包含了渲染和流式传输响应的完整工作。

我们部署到 Vercel 的 1 vCPU/2GB `iad1`（us-east-1）区域，并从同一 AWS 区域的虚拟机运行基准测试客户端，以最小化网络可变性。

基准测试侧重于服务器端渲染，即在将 HTML 发送到浏览器之前，在服务器上从 React 组件生成 HTML 的过程。这与客户端渲染不同，后者是浏览器接收 JavaScript 并自行构建页面。

平台开销是指在到达您的应用程序之前，在基础设施代码中花费的时间。在这些测试中，平台开销仅占总请求时间的一小部分。几乎所有的执行都发生在应用程序运行时内部。

性能分析表明，Node.js 中的主要瓶颈来自其 Web Streams 实现和转换操作，其中缓冲区扫描和数据转换增加了可观的 CPU 成本。在重负载下，垃圾回收也消耗了总处理时间的很大一部分。

![使用 1 vCPU/2GB 测量完整 TTLB 的基准测试结果](/images/posts/18b4801ae855.jpg)

![使用 1 vCPU/2GB 测量完整 TTLB 的基准测试结果](/images/posts/4b334b8be5b3.jpg)

对于 Next.js 工作负载，Bun 与 Node.js 相比，延迟降低了 28%。在 React SSR、SvelteKit 和原生 JavaScript 基准测试中，各平台的性能相似。Next.js 的性能提升来自 Bun 对 Web Streams 的优化处理以及减少的垃圾回收开销。一旦我们集成了 Bun 优化的 `react-dom/server` 实现，我们预计 React SSR 的数据会进一步改善。

完整的基准测试实现 **可在 GitHub 上获取**。

## 性能特征与权衡

每个运行时都有其独特的优势。Bun 为服务器渲染工作负载带来了明显的速度提升，而 Node.js 仍然是最兼容且经过实战检验的环境。

下表总结了它们的主要区别：

| 类别 | Bun | Node.js |
| :--- | :--- | :--- |
| **性能** | 对 CPU 密集型和流式工作负载更快 | 在各种工作负载类型中可靠且一致 |
| **冷启动** | 由于运行时初始化开销，比 Node.js 慢 | 成熟且优化良好 |
| **兼容性** | 实现了 Node.js API，覆盖范围不断扩大；可能存在边缘情况差异 | 完全的生态系统兼容性 |
| **生态系统成熟度** | 快速发展；社区规模较小 | 稳定，在框架和库中得到广泛支持 |
| **最佳用途** | 对性能要求苛刻的应用程序 | 默认选择，以获得广泛的兼容性和生产稳定性 |

在将生产流量迁移之前，请在 Bun 下测试您的依赖项，以确认预期行为。虽然 Bun 实现了 Node.js API，但某些边缘情况的行为可能有所不同。

## 在 Vercel 上部署 Bun

**Bun 运行时** 现已进入 **公测阶段**。

我们将继续扩展框架支持，并优化 Node.js 和 Bun 的性能。如果您遇到性能问题或有基准测试想要分享，我们很乐意看到。

在 Vercel Functions 上试用 Bun 运行时

只需一次配置更改即可在 Node.js 和 Bun 之间切换。现已进入公测阶段。

使用 Bun 部署

---

> 本文由AI自动翻译，原文链接：[Bun runtime on Vercel Functions - Vercel](https://vercel.com/blog/bun-runtime-on-vercel-functions)
> 
> 翻译时间：2026-02-08 04:37
