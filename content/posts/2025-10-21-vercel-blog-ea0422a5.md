---
title: Vercel就2025年10月20日服务中断事件发布说明，承担全部责任
title_original: Update regarding Vercel service disruption on October 20, 2025 - Vercel
date: '2025-10-21'
source: Vercel Blog
source_url: https://vercel.com/blog/update-regarding-vercel-service-disruption-on-october-20-2025
author: ''
summary: 本文是Vercel针对2025年10月20日服务中断事件的官方说明。Vercel明确表示对此次事件负全部责任，尽管其由AWS us-east-1区域中断触发。文章详细描述了中断过程：AWS中断首先影响了部分客户的生产流量，随后引发的连锁故障导致其功能标志提供商中断，进而影响了Vercel控制平面（仪表板、API等），但未波及客户生产流量。Vercel阐述了其应对措施与恢复时间线，并重申了其构建高可用性基础设施的承诺。
categories:
- AI基础设施
tags:
- Vercel
- 服务中断
- AWS
- 云计算
- 高可用性
draft: false
translated_at: '2026-02-13T04:32:23.391281'
---

在 Vercel，我们的理念是为供应商承担**责任**而非**指责**。客户使用我们的服务是为了获得速度、可靠性和交付优秀产品。无论我们选择 A 还是 B 作为我们“电路设计”的组成部分，这完全是我们自己的责任。

Vercel 对这起事件负全部责任，即使现在众所周知它是由 AWS `us-east-1`（称为 `iad1` 区域）的意外中断触发的。Vercel 使用 AWS 基础设施原语，是 **AWS 市场**的一部分，提供与 AWS 服务的**安全连接**，并且与 AWS 在**开创无服务器计算**方面有着悠久的历史。

对我们的客户而言，Vercel **明确无误地**对此次中断负责。

我们的目标是**简化**云服务并提供其最佳版本。通过**框架定义的基础设施**，我们通过部署高度优化的全球基础设施资源，帮助开发者专注于应用层。我们在 19 个 AWS 区域运营我们的计算、CDN 和防火墙服务，在 95 个城市和 130 多个全球接入点终止并保护流量。

昨天，我们未能兑现这一承诺。虽然**仍有大量流量得到服务**，并且我们保护了客户免受单一全球故障点的影响，但我们的目标是**让客户即使在发生中断时也绝不丢失任何一个请求**。

## 服务中断概述

AWS 中断在 Vercel 端导致了 2 起独立事件。

第一起事件由 `us-east-1` 数据中心的初始丢失引起，导致 Vercel 服务客户生产流量暂时中断。

第二起事件由我们的功能标志提供商中断引起，这是 `us-east-1` 中断的连锁故障，**未影响**生产流量的服务，但确实导致了 Vercel 控制平面的重大中断，影响了 Vercel 仪表板、API、构建和日志处理。

### `us-east-1` 区域的初始丢失

Vercel 用于服务生产流量的技术栈设计为能够承受我们 19 个运营区域中任何一个的丢失。我们过去已多次证明这种能力，但周一的事件引发了意外的连锁故障，导致了额外的影响。

![红色：主要中断对全球流量的影响。](/images/posts/0ba59a0c4528.jpg)

![红色：主要中断对全球流量的影响。](/images/posts/f1ca19142761.jpg)

![红色：主要中断对全球流量的影响。](/images/posts/0ee1fcd3be2c.jpg)

![红色：主要中断对全球流量的影响。](/images/posts/47b6506267af.jpg)

我们的团队在 UTC 时间 06:55 首次收到初始问题的警报。起初，我们只观察到轻微的流量中断。出于高度谨慎，团队于 UTC 时间 07:15 开始将流量从 `us-east-1` 重新路由，为直接连接到该区域的最终用户恢复了服务。

在 UTC 时间 07:25，我们开始为配置了**备份或次要区域**的客户重新路由函数调用，恢复了他们的完整服务。

在 UTC 时间 07:45，连锁故障导致我们全球缓存基础设施的一部分丢失，进而导致静态文件服务失败，峰值达到约 22% 的流量。这段时间是整个事件中影响最大的时期。服务在 UTC 时间 08:18 恢复。我们已经缓解了此次连锁故障的根本原因。

![黄线显示了中断期间函数调用错误率的升高。](/images/posts/33d086e07351.jpg)

![黄线显示了中断期间函数调用错误率的升高。](/images/posts/7b8bfc63b79f.jpg)

![黄线显示了中断期间函数调用错误率的升高。](/images/posts/32bee29d973a.jpg)

![黄线显示了中断期间函数调用错误率的升高。](/images/posts/bdac1202dc00.jpg)

对于未配置多个函数区域且仅使用 `us-east-1` 作为其唯一区域的客户，函数调用在 UTC 时间 09:21 恢复。

### Vercel 控制平面的二次中断

Vercel 的控制平面使用 `us-west-1` 作为其主要区域，因此并未直接受到 `us-east-1` 中断的影响。然而，在 UTC 时间 19:20，Vercel 控制平面使用的一个功能标志提供商发生了重大中断，很可能是由早期 `us-east-1` 中断的下游效应引起的。

Vercel 的控制平面被 Vercel 仪表板、CLI、API 以及日志转发等服务使用。这是 Vercel 服务技术栈中一个完全独立的系统，因此此次中断**未影响**我们客户的生产流量服务。然而，它确实导致客户无法部署、启动回滚以及执行其他管理任务。

功能标志提供商的不可用导致我们主要 Kubernetes 集群的资源耗尽，并延迟或导致了处理失败。

在 UTC 时间 19:48，团队开始尝试并逐步推出缓解措施，以应对功能标志提供商的不可用以及导致资源耗尽的代码模式。控制平面服务在 UTC 时间 03:00 左右完全恢复。

更多详情和特定服务信息，请参阅**完整时间线**。

## 从请求角度看中断

为了提供更多背景信息，在本节中，我们以请求 `rauchg.com` 为例，从请求的角度解释服务中断：

1.  对 `rauchg.com` 进行 DNS 查找以解析 A 记录
    *   该域名使用 Vercel DNS，它利用任播、智能 DNS 和实时引导将流量路由到健康的端点，隔离区域故障以实现全球可靠性。
    *   ✓ 这按预期工作。
2.  DNS 查询返回一个 Vercel CDN IP
    *   Vercel CDN 通过任播提供全球加速。单个 IP 可以在全球范围内将流量引导至最近的健康 CDN 边缘区域，最大限度地减少延迟，隔离故障，并维持跨大洲的可靠性。
    *   在提供任播 IP 的同时，我们仍然建议客户使用 `CNAME` 记录，特别是在不使用 Vercel DNS 时。`CNAME` 为 Vercel 的基础设施团队提供了另一个用于动态更新的流量引导点。
    *   ✓ 这按预期工作。
3.  我们的 L3-L5 保护确保您的流量安全
    *   Vercel 边缘网络提供始终在线的托管 DDoS 保护，具有自动检测、自适应缓解和全球边缘防御功能。这包括缓解 SYN、UDP、ICMP、TCP 洪水攻击、畸形和超大数据包等。
    *   ✓ 这按预期工作。
4.  与 `https://rauchg.com` 进行 TLS 握手

- Vercel的边缘网络包含一个内部称为“HTTPS终端器”的全局组件。在任意一周内，Vercel为数千万个独立域名提供服务，这需要一个复杂的全局证书复制、存储和缓存系统。
- 该系统设计为主动复制。当证书创建时，它会被推送到我们所有的CDN边缘区域。当HTTPS终端器节点读取证书时，出于性能和容错原因，证书会被缓存。
- ✓ 此功能按预期工作。

Vercel的边缘网络包含一个内部称为“HTTPS终端器”的全局组件。在任意一周内，Vercel为数千万个独立域名提供服务，这需要一个复杂的全局证书复制、存储和缓存系统。

该系统设计为主动复制。当证书创建时，它会被推送到我们所有的CDN边缘区域。当HTTPS终端器节点读取证书时，出于性能和容错原因，证书会被缓存。

5. 我们的L7防火墙保护您的流量安全

- Vercel防火墙是一个全局分布式服务，由内部称为Protectd的组件驱动，无需全局依赖或单点故障即可保护每个区域。通过最小化其对全局协调的需求，它拥有行业领先的L7缓解速度（考虑到云资源和AI Token消耗的按需性质，这一点至关重要）。
- ✓ 此功能按预期工作。

Vercel防火墙是一个全局分布式服务，由内部称为Protectd的组件驱动，无需全局依赖或单点故障即可保护每个区域。通过最小化其对全局协调的需求，它拥有行业领先的L7缓解速度（考虑到云资源和AI Token消耗的按需性质，这一点至关重要）。

6. 向 `https://rauchg.com` 发起HTTP请求

- Vercel CDN拥有全局复制的元数据基础设施，无单点故障。这使我们能够将 `rauchg.com` 解析到特定的部署目的地。与其他服务不同，Vercel通常同时充当CDN和源站，尽管两者可以独立使用。
- 部署元数据系统是我们基础设施中最关键的部分之一，我们为此投入了大量的工程、负载测试和故障转移设计。
- ◑ 全局部署元数据在全球范围内按预期工作，但如果客户直接访问 `iad1` 区域，他们会遇到服务中断，直到我们重新路由了 `iad1` 区域。

Vercel CDN拥有全局复制的元数据基础设施，无单点故障。这使我们能够将 `rauchg.com` 解析到特定的部署目的地。与其他服务不同，Vercel通常同时充当CDN和源站，尽管两者可以独立使用。

部署元数据系统是我们基础设施中最关键的部分之一，我们为此投入了大量的工程、负载测试和故障转移设计。

◑ 全局部署元数据在全球范围内按预期工作，但如果客户直接访问 `iad1` 区域，他们会遇到服务中断，直到我们重新路由了 `iad1` 区域。

7. 一旦Vercel CDN获得部署元数据，它就会执行路由。

- 每个Vercel CDN区域都运行一个内部名为“区域缓存”的组件。它负责缓存静态资源和可缓存的动态请求。该系统是复制的，并具有严格的持久性和延迟保证。路由元数据的源是 `us-east-1` S3，但系统设计为在首次使用时全局持久化数据。
- ✗ 虽然元数据被主动传播到每个区域，但我们经历了区域缓存服务的级联故障，导致了更大范围的服务中断。

每个Vercel CDN区域都运行一个内部名为“区域缓存”的组件。它负责缓存静态资源和可缓存的动态请求。该系统是复制的，并具有严格的持久性和延迟保证。路由元数据的源是 `us-east-1` S3，但系统设计为在首次使用时全局持久化数据。

✗ 虽然元数据被主动传播到每个区域，但我们经历了区域缓存服务的级联故障，导致了更大范围的服务中断。

8. 路由可以为请求决定多种处理方式

路由中间件执行
- 客户可以使用Fluid计算在请求服务路径中运行动态路由和内容管理的逻辑，并充分利用Node.js运行时的全部能力。这以部署到每个CDN区域的Vercel函数形式运行。
- ◑ 对于直接访问 `us-east-1` 区域的用户，最初出现了服务中断，但鉴于路由中间件的全局部署，总体影响有限。

客户可以使用Fluid计算在请求服务路径中运行动态路由和内容管理的逻辑，并充分利用Node.js运行时的全部能力。这以部署到每个CDN区域的Vercel函数形式运行。

◑ 对于直接访问 `us-east-1` 区域的用户，最初出现了服务中断，但鉴于路由中间件的全局部署，总体影响有限。

函数调用
- ◑ 对于未将 `us-east-1` 作为其唯一区域的客户没有影响。对于使用 `us-east-1` (`iad1`) 的客户，如果配置了备份区域，我们执行了故障转移。

◑ 对于未将 `us-east-1` 作为其唯一区域的客户没有影响。对于使用 `us-east-1` (`iad1`) 的客户，如果配置了备份区域，我们执行了故障转移。

提供HTTP `Cache-Control` 内容
- 如果某个URL先前已被提供，并且源站或函数返回了 `Cache-Control`，Vercel会将其响应保存在一个内部称为“响应缓存”的组件中。
- ✓ 此功能按预期工作。

如果某个URL先前已被提供，并且源站或函数返回了 `Cache-Control`，Vercel会将其响应保存在一个内部称为“响应缓存”的组件中。

提供静态和ISR内容
- 如果路由将URL映射到静态资源或ISR，则从区域内的缓存提供服务，必要时回退到源站。
- ◑ 当ISR内容在边缘缓存时，其服务如预期般继续。对于以 `us-east-1` 为源站的ISR内容，如果内容尚未在边缘缓存，则出现了暂时性中断。

如果路由将URL映射到静态资源或ISR，则从区域内的缓存提供服务，必要时回退到源站。

◑ 当ISR内容在边缘缓存时，其服务如预期般继续。对于以 `us-east-1` 为源站的ISR内容，如果内容尚未在边缘缓存，则出现了暂时性中断。

## 事件时间线

2025年10月20日，星期一

06:55 UTC：首次触发Vercel服务错误的自动警报，并自动创建事件。值班工程师收到通知。

06:56 UTC：主值班工程师响应并开始调查。

06:59 UTC：主值班工程师持续收到更多警报呼叫，并升级至其他值班工程师协助排查。启动事件通话以组织排查工作。

07:07 UTC：值班工程师判定AWS托管服务很可能出现重大故障，进一步升级至"紧急轮值组"，该组会呼叫Vercel所有最高级别、经验最丰富的值班响应人员。

07:15 UTC：由于服务堆栈故障，我们决定将流量从iad1数据中心重新路由至邻近数据中心。于07:20 UTC开始逐步从iad1重定向流量，该过程于07:44 UTC完成。

07:35 UTC：由于数据中心内新构建机器配置失败，我们决定将构建任务重定向至其他区域，并于07:40 UTC完成此操作。此时，依赖Vercel外部资源（如绑定在AWS us-east-1区域的数据库）的构建任务仍持续失败。

08:16 UTC：我们观察到Vercel仪表板加载失败增加，Vercel Teams API错误率升高。根本原因确定为外部依赖请求延迟升高导致CPU资源枯竭。我们于08:51 UTC手动扩展服务容量。

09:15 UTC：Vercel Teams API恢复，Vercel仪表板加载不再出现错误。

09:45 UTC：因us-east-1区域AWS API问题，选择iad1作为部署区域且使用路由中间件或Vercel函数的新部署均告失败。这包括所有配置安全计算且指定区域为iad1的项目。

10:22 UTC：我们观察到iad1构建集群健康检查通过，并将安全计算构建任务路由至该集群。安全计算构建功能由此恢复。

11:52 UTC：我们恢复了在iad1区域创建Vercel函数和中间件的API服务功能。

17:19 UTC：我们观察到iad1区域调用Vercel函数的失败率小幅上升，同时收到关于函数路由服务新实例调度失败的告警。

17:24 UTC：我们判定调度失败由AWS us-east-1区域持续的EC2容量问题导致。通过减少iad1非关键基础设施的资源分配以释放容量供函数路由服务使用，随后观察到Vercel函数调用恢复。

17:29 UTC：我们更新服务堆栈配置，使Vercel函数服务优先选择其他可用区域而非iad1。

17:35 UTC：我们观察到iad1区域调用Vercel函数的错误率下降。调用错误仍以较低频率持续出现，直至17:49 UTC完全恢复。

17:47 UTC：AWS API再次降级导致在iad1创建Vercel函数和中间件时出错，引发构建失败。

18:50 UTC：支持Vercel运行时日志的服务开始出现超时。

19:20 UTC：我们开始观察到Vercel仪表板加载失败，且Vercel API服务错误响应增多。运行Vercel控制平面服务（为仪表板和API提供支持）的容器开始频繁重启。

19:31 UTC：Vercel API错误率升高的自动告警呼叫主值班工程师。为此问题单独开启事件进行排查。

19:41 UTC：我们确定Vercel功能标志提供商的超时问题是根本原因，导致Vercel API服务返回500响应及容器重启。

19:48 UTC：我们发布变更以减少超时设置，并降低对标志提供商请求失败的影响。此举减少了容器重启，但Vercel API服务仍处于降级状态。

21:20 UTC：我们以分批递增方式向降级服务发布实验性变更。在首次发布观察到恢复迹象后，于22:31 UTC前将变更推广至所有控制平面降级服务。

2025年10月21日，星期二

00:20 UTC：随着标志提供商问题复发，Vercel仪表板和API再次出现降级。数小时前的实验性变更尚未覆盖100%的服务。

00:48 UTC：我们观察到多个区域缺少Vercel运行时日志。底层基础设施显示部分区域积压了5-6小时的日志。我们合并变更以提高这些区域的吞吐量。

02:37 UTC：Vercel控制平面服务中的所有标志客户端重新配置为使用实验性修复方案。

03:01 UTC：发布针对日志管道的另一项修复，成功解除日志处理阻塞。受影响区域的积压时长开始下降。

03:30 UTC：Vercel仪表板和API服务完全恢复。

06:21 UTC：运行时日志完全恢复。

## 未来改进计划

我们正在撰写详细的技术复盘报告，将系统性地缓解此次服务中断暴露的故障模式。此外，我们将继续并加强针对重大区域性中断的演练工作。

---

> 本文由AI自动翻译，原文链接：[Update regarding Vercel service disruption on October 20, 2025 - Vercel](https://vercel.com/blog/update-regarding-vercel-service-disruption-on-october-20-2025)
> 
> 翻译时间：2026-02-13 04:32
