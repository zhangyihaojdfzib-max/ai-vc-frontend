---
title: 表格思维链：通过迭代演化表格提升大模型推理能力
title_original: 'Chain-of-table: Evolving tables in the reasoning chain for table
  understanding'
date: '2024-03-11'
source: Google AI Blog
source_url: http://blog.research.google/2024/03/chain-of-table-evolving-tables-in.html
author: null
summary: 本文提出“表格思维链”框架，用于提升大语言模型对表格数据的理解与推理能力。该框架引导模型通过上下文学习，迭代生成操作（如筛选、聚合、排序）并动态更新表格，形成结构化的推理链。这种方法将复杂表格逐步转化为更易处理的形式，使推理过程更透明、结果更准确。实验表明，该方法在WikiTQ、TabFact等多个表格理解基准上取得了新的最先进性能，尤其在处理复杂问题时优势显著。
categories:
- AI研究
tags:
- 大语言模型
- 表格理解
- 推理链
- 自然语言处理
- AI研究
draft: false
translated_at: '2026-01-05T17:13:54.255Z'
---

表格思维链：在推理链中演化表格以实现表格理解
2024年3月11日
Zilong Wang（学生研究员）与 Chen-Yu Lee（研究科学家），云AI团队
快速链接

人们每天使用表格，以结构化、易于访问的格式组织和解读复杂信息。由于表格无处不在，对表格数据进行推理长期以来一直是自然语言处理（NLP）的核心课题。该领域的研究人员旨在利用语言模型帮助用户基于表格回答问题、验证陈述和分析数据。然而，语言模型是在大量纯文本上训练的，因此表格数据固有的结构化特性可能使语言模型难以完全理解和利用。

最近，大语言模型（LLM）通过生成可靠的推理链，在各种自然语言理解（NLU）任务中取得了出色的性能，如思维链和最少到最多等工作所示。然而，LLM对表格数据进行推理的最合适方式仍然是一个悬而未决的问题。

在《表格思维链：在推理链中演化表格以实现表格理解》中，我们提出了一个处理表格理解任务的框架。我们训练LLM逐步概述其推理过程，迭代更新给定表格以反映思维过程的每个部分，类似于人们解决基于表格的问题的方式。这使得LLM能够将表格转化为更简单、更易管理的部分，从而深入理解和分析表格的每个部分。这种方法带来了显著的改进，并在WikiTQ、TabFact和FeTaQA基准测试中取得了新的最先进成果。下图展示了所提出的表格思维链及其他方法的高级概览。

表格思维链

在表格思维链中，我们使用上下文学习指导LLM迭代生成操作并更新表格，以表示其对表格数据的推理链。这使得LLM能够根据先前操作的结果动态规划下一个操作。表格的这种持续演化形成了一条链，为给定问题提供了更结构化、更清晰的推理过程表示，并使LLM能够做出更准确、更可靠的预测。

例如，当被问到“哪位演员获得的NAACP形象奖最多？”时，表格思维链框架会提示LLM生成反映表格推理过程的表格操作。它首先识别相关列。然后，基于共享内容聚合行。最后，它重新排序聚合结果，生成一个能清晰回答所提问题的最终表格。

这些操作转换表格以与所提问题对齐。为了在大型表格上平衡性能与计算开销，我们根据表格行的子集构建操作链。同时，通过展示表格操作的中间结果，逐步操作揭示了底层的推理过程，从而增强了可解释性和理解。

表格思维链包含三个主要阶段。在第一阶段，它指导LLM通过上下文学习动态规划下一个操作。具体来说，提示包含三个组成部分，如下图所示：
- 问题 Q：“哪个国家有最多的自行车手进入前三名？”
- 操作历史链：f_add_col(Country) 和 f_select_row(1, 2, 3)。
- 最新的中间表格 T：转换后的中间表格。

通过在提示中提供三元组（T, Q, chain），LLM可以观察先前的表格推理过程，并从操作池中选择下一个操作，以逐步完成推理链。

确定下一个操作 f 后，在第二阶段，我们需要生成参数。如上所述，表格思维链在提示中考虑三个组成部分，如图所示：（1）问题，（2）所选操作及其所需参数，以及（3）最新的中间表格。

例如，当选择操作 f_group_by 时，它需要一个列标题名作为其参数。
LLM在表格中选择一个合适的列标题。配备所选操作和生成的参数后，表格思维链执行该操作，并为后续推理构建一个新的中间表格。

表格思维链迭代前两个阶段以规划下一个操作并生成所需参数。在此过程中，我们创建了一个操作链，作为表格推理步骤的代理。这些操作生成中间表格，向LLM展示每一步的结果。因此，输出表格包含了表格推理中间阶段的全面信息。在我们的最后阶段，我们利用这个输出表格来构建最终查询，并连同问题一起提示LLM以获取最终答案。

实验设置

我们使用 PaLM 2-S 和 GPT 3.5 作为骨干LLM，并在三个公开的表格理解基准测试上进行实验：WikiTQ、TabFact 和 FeTaQA。WikiTQ 和 FeTaQA 是基于表格的问答数据集。TabFact 是基于表格的事实验证基准。在本博客文章中，我们将重点关注 WikiTQ 和 TabFact 上的结果。我们将表格思维链与通用推理方法（例如，端到端问答、少样本问答和思维链）以及程序辅助方法（例如，Text-to-SQL、Binder 和 Dater）进行比较。

更准确的答案

对更难问题具有更好的鲁棒性

在表格思维链中，更长的操作链表明问题及其对应表格的难度和复杂性更高。我们根据表格思维链中的操作长度对测试样本进行分类。我们将表格思维链与思维链和Dater进行比较，作为通用推理方法和程序辅助推理方法的代表。我们使用PaLM 2在WikiTQ上的结果来说明这一点。

值得注意的是，表格思维链在所有操作链长度上都持续超越两种基线方法，与思维链相比优势高达11.6%，与Dater相比优势高达7.9%。此外，与其他基线方法相比，表格思维链的性能随着操作数量的增加而平缓下降，当操作数量从四个增加到五个时，性能下降幅度极小。

对更大表格具有更好的鲁棒性

正如预期的那样，随着输入表格变大，性能会下降，因为模型需要在更长的上下文中进行推理。尽管如此，所提出的表格思维链的性能下降平缓，在处理大型表格时，相比第二好的竞争方法实现了超过10%的显著提升。这证明了推理链在处理长表格输入方面的有效性。

结论

我们提出的表格思维链方法通过利用表格结构来表达基于表格推理的中间步骤，增强了LLM的推理能力。它指导LLM根据输入表格及其相关问题动态规划操作链。这种不断演化的表格设计为理解如何提示LLM进行表格理解提供了新的思路。

致谢

这项研究由 Zilong Wang, Hao Zhang, Chun-Liang Li, Julian Martin Eisenschlos, Vincent Perot, Zifeng Wang, Lesly Miculicich, Yasuhisa Fujii, Jingbo Shang, Chen-Yu Lee, Tomas Pfister 完成。感谢 Chih-Kuan Yeh 和 Sergey Ioffe 提供的宝贵反馈。

---

> 本文由AI自动翻译，原文链接：[Chain-of-table: Evolving tables in the reasoning chain for table understanding](http://blog.research.google/2024/03/chain-of-table-evolving-tables-in.html)
> 
> 翻译时间：2026-01-05 17:13
