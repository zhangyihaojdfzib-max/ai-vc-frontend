---
title: Transformers.js v4é¢„è§ˆç‰ˆå‘å¸ƒï¼šå…¨æ–°WebGPUè¿è¡Œæ—¶ä¸Žæ€§èƒ½é£žè·ƒ
title_original: 'Transformers.js v4 Preview: Now Available on NPM!'
date: '2026-02-09'
source: Hugging Face Blog
source_url: https://huggingface.co/blog/transformersjs-v4
author: ''
summary: Transformers.js v4é¢„è§ˆç‰ˆæ­£å¼ç™»é™†NPMï¼Œæ ‡å¿—ç€è¯¥JavaScriptæœºå™¨å­¦ä¹ åº“çš„é‡å¤§å‡çº§ã€‚æœ¬æ¬¡æ›´æ–°æ ¸å¿ƒåœ¨äºŽå¼•å…¥å…¨æ–°çš„C++é‡å†™WebGPUè¿è¡Œæ—¶ï¼Œé€šè¿‡ä¸ŽONNX
  Runtimeæ·±åº¦åˆä½œï¼Œæ˜¾è‘—æå‡çº¦200ç§æ¨¡åž‹æž¶æž„çš„æ€§èƒ½ä¸Žç®—å­æ”¯æŒï¼Œå¹¶å®žçŽ°æµè§ˆå™¨ã€Nodeã€Bunã€Denoç­‰å¤šçŽ¯å¢ƒä¸‹çš„WebGPUåŠ é€Ÿã€‚ä»£ç åº“é‡æž„ä¸ºPNPM
  monorepoç»“æž„ï¼Œå¢žå¼ºäº†æ¨¡å—åŒ–ä¸Žå¯ç»´æŠ¤æ€§ï¼ŒåŒæ—¶æ–°å¢žäº†GPT-OSSç­‰å¤šç§æ–°æ¨¡åž‹æž¶æž„æ”¯æŒï¼Œè‡´åŠ›äºŽåœ¨èµ„æºå—é™çŽ¯å¢ƒä¸‹å®žçŽ°æœ€ä¼˜æ€§èƒ½ä¸Žå®Œæ•´çš„ç¦»çº¿åº”ç”¨èƒ½åŠ›ã€‚
categories:
- AIåŸºç¡€è®¾æ–½
tags:
- Transformers.js
- WebGPU
- ONNX Runtime
- å‰ç«¯AI
- æ¨¡åž‹éƒ¨ç½²
draft: false
translated_at: '2026-02-10T04:33:15.019110'
---

# Transformers.js v4 é¢„è§ˆç‰ˆï¼šçŽ°å·²åœ¨ NPM å‘å¸ƒï¼

æˆ‘ä»¬æ¿€åŠ¨åœ°å®£å¸ƒï¼ŒTransformers.js v4ï¼ˆé¢„è§ˆç‰ˆï¼‰çŽ°å·²åœ¨ NPM ä¸Šå‘å¸ƒï¼ç»è¿‡è¿‘ä¸€å¹´çš„å¼€å‘ï¼ˆæˆ‘ä»¬äºŽ 2025 å¹´ 3 æœˆå¯åŠ¨ ðŸ¤¯ï¼‰ï¼Œæˆ‘ä»¬ç»ˆäºŽå‡†å¤‡å¥½è®©å¤§å®¶è¿›è¡Œæµ‹è¯•ã€‚æ­¤å‰ï¼Œç”¨æˆ·å¿…é¡»é€šè¿‡ GitHub ç›´æŽ¥ä»Žæºä»£ç å®‰è£… v4ï¼Œä½†çŽ°åœ¨åªéœ€è¿è¡Œä¸€æ¡ç®€å•çš„å‘½ä»¤ï¼

```sh
npm i @huggingface/transformers@next

```

åœ¨æ­£å¼ç‰ˆå‘å¸ƒä¹‹å‰ï¼Œæˆ‘ä»¬å°†ç»§ç»­åœ¨ NPM çš„ `next` æ ‡ç­¾ä¸‹å‘å¸ƒ v4 ç‰ˆæœ¬ï¼Œæ•¬è¯·æœŸå¾…å®šæœŸæ›´æ–°ï¼

## æ€§èƒ½ä¸Žè¿è¡Œæ—¶æ”¹è¿›

æœ€å¤§çš„å˜åŒ–æ— ç–‘æ˜¯é‡‡ç”¨äº†å…¨æ–°çš„ WebGPU è¿è¡Œæ—¶ï¼Œè¯¥è¿è¡Œæ—¶å®Œå…¨ç”¨ C++ é‡å†™ã€‚æˆ‘ä»¬ä¸Ž ONNX Runtime å›¢é˜Ÿç´§å¯†åˆä½œï¼Œå¯¹æˆ‘ä»¬æ”¯æŒçš„çº¦ 200 ç§æ¨¡åž‹æž¶æž„ä»¥åŠè®¸å¤šæ–°çš„ v4 ä¸“å±žæž¶æž„è¿›è¡Œäº†å…¨é¢æµ‹è¯•ã€‚

é™¤äº†æ›´å¥½çš„ç®—å­æ”¯æŒï¼ˆåœ¨æ€§èƒ½ã€ç²¾åº¦å’Œè¦†ç›–èŒƒå›´æ–¹é¢ï¼‰ï¼Œè¿™ä¸ªæ–°çš„ WebGPU è¿è¡Œæ—¶å…è®¸ç›¸åŒçš„ transformers.js ä»£ç åœ¨å¤šç§ JavaScript çŽ¯å¢ƒä¸­ä½¿ç”¨ï¼ŒåŒ…æ‹¬æµè§ˆå™¨ã€æœåŠ¡å™¨ç«¯è¿è¡Œæ—¶å’Œæ¡Œé¢åº”ç”¨ç¨‹åºã€‚æ²¡é”™ï¼Œæ‚¨çŽ°åœ¨å¯ä»¥ç›´æŽ¥åœ¨ Nodeã€Bun å’Œ Deno ä¸­è¿è¡Œ WebGPU åŠ é€Ÿçš„æ¨¡åž‹äº†ï¼

![WebGPU æ¦‚è¿°](/images/posts/0335a3d71b59.png)

æˆ‘ä»¬å·²ç»è¯æ˜Žäº†åœ¨æµè§ˆå™¨ä¸­ 100% æœ¬åœ°è¿è¡Œæœ€å…ˆè¿›çš„ AI æ¨¡åž‹æ˜¯å¯è¡Œçš„ï¼ŒçŽ°åœ¨æˆ‘ä»¬ä¸“æ³¨äºŽæ€§èƒ½ï¼šè®©è¿™äº›æ¨¡åž‹è¿è¡Œå¾—å°½å¯èƒ½å¿«ï¼Œå³ä½¿åœ¨èµ„æºå—é™çš„çŽ¯å¢ƒä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™éœ€è¦æˆ‘ä»¬å½»åº•é‡æ–°æ€è€ƒå¯¼å‡ºç­–ç•¥ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽå¤§è¯­è¨€æ¨¡åž‹ã€‚æˆ‘ä»¬é€šè¿‡é€ä¸ªæ“ä½œé‡æ–°å®žçŽ°æ–°æ¨¡åž‹ï¼Œå¹¶åˆ©ç”¨ä¸“é—¨çš„ ONNX Runtime è´¡çŒ®ç®—å­ï¼ˆå¦‚ `com.microsoft.GroupQueryAttention`ã€`com.microsoft.MatMulNBits` æˆ– `com.microsoft.QMoE`ï¼‰æ¥æœ€å¤§åŒ–æ€§èƒ½ã€‚

ä¾‹å¦‚ï¼Œé‡‡ç”¨ `com.microsoft.MultiHeadAttention` ç®—å­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†åŸºäºŽ BERT çš„åµŒå…¥æ¨¡åž‹é€Ÿåº¦æå‡çº¦ 4 å€ã€‚

![ä¼˜åŒ–çš„ ONNX å¯¼å‡º](/images/posts/5c00fe6031ec.png)

æ­¤æ›´æ–°é€šè¿‡åœ¨æµè§ˆå™¨æœ¬åœ°ç¼“å­˜ WASM æ–‡ä»¶ï¼Œå®žçŽ°äº†å®Œæ•´çš„ç¦»çº¿æ”¯æŒï¼Œå…è®¸ç”¨æˆ·åœ¨åˆæ¬¡ä¸‹è½½åŽæ— éœ€äº’è”ç½‘è¿žæŽ¥å³å¯è¿è¡Œ Transformers.js åº”ç”¨ç¨‹åºã€‚

## ä»£ç åº“é‡æž„

å¼€å‘ä¸€ä¸ªæ–°çš„ä¸»è¦ç‰ˆæœ¬è®©æˆ‘ä»¬æœ‰æœºä¼šå¯¹ä»£ç åº“è¿›è¡ŒæŠ•å…¥ï¼Œå¹¶ç€æ‰‹è¿›è¡Œæ—©è¯¥è¿›è¡Œçš„é‡æž„å·¥ä½œã€‚

### PNPM å·¥ä½œåŒº

åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒGitHub ä»“åº“ä¸€ç›´ä½œä¸ºæˆ‘ä»¬çš„ npm åŒ…ã€‚åªè¦ä»“åº“åªå…¬å¼€ä¸€ä¸ªåº“ï¼Œè¿™ç§æ–¹å¼å°±è¿ä½œè‰¯å¥½ã€‚ç„¶è€Œï¼Œå±•æœ›æœªæ¥ï¼Œæˆ‘ä»¬çœ‹åˆ°éœ€è¦å„ç§å­åŒ…ï¼Œè¿™äº›å­åŒ…ä¸¥é‡ä¾èµ– Transformers.js æ ¸å¿ƒï¼ŒåŒæ—¶è§£å†³ä¸åŒçš„ç”¨ä¾‹ï¼Œä¾‹å¦‚ç‰¹å®šåº“çš„å®žçŽ°ï¼Œæˆ–è€…å¤§å¤šæ•°ç”¨æˆ·ä¸éœ€è¦ä½†å¯¹æŸäº›ç”¨æˆ·è‡³å…³é‡è¦çš„è¾ƒå°å®žç”¨å·¥å…·ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä½¿ç”¨ pnpm å·¥ä½œåŒºå°†ä»“åº“è½¬æ¢ä¸º monorepoã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå‘å¸ƒä¾èµ–äºŽ `@huggingface/transformers` çš„æ›´å°çš„åŒ…ï¼Œè€Œæ— éœ€ç»´æŠ¤å•ç‹¬ä»“åº“çš„å¼€é”€ã€‚

### æ¨¡å—åŒ–ç±»ç»“æž„

å¦ä¸€é¡¹ä¸»è¦çš„é‡æž„å·¥ä½œé’ˆå¯¹ä¸æ–­å¢žé•¿çš„ models.js æ–‡ä»¶ã€‚åœ¨ v3 ä¸­ï¼Œæ‰€æœ‰å¯ç”¨æ¨¡åž‹éƒ½å®šä¹‰åœ¨ä¸€ä¸ªè¶…è¿‡ 8000 è¡Œçš„å•ä¸€æ–‡ä»¶ä¸­ï¼Œç»´æŠ¤å˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚å¯¹äºŽ v4ï¼Œæˆ‘ä»¬å°†å…¶æ‹†åˆ†ä¸ºæ›´å°ã€æ›´ä¸“æ³¨çš„æ¨¡å—ï¼Œæ˜Žç¡®åŒºåˆ†å®žç”¨å‡½æ•°ã€æ ¸å¿ƒé€»è¾‘å’Œæ¨¡åž‹ç‰¹å®šå®žçŽ°ã€‚è¿™ç§æ–°ç»“æž„æé«˜äº†å¯è¯»æ€§ï¼Œå¹¶ä½¿æ·»åŠ æ–°æ¨¡åž‹å˜å¾—å®¹æ˜“å¾—å¤šã€‚å¼€å‘è€…çŽ°åœ¨å¯ä»¥ä¸“æ³¨äºŽæ¨¡åž‹ç‰¹å®šçš„é€»è¾‘ï¼Œè€Œæ— éœ€æµè§ˆæ•°åƒè¡Œä¸ç›¸å…³çš„ä»£ç ã€‚

### ç¤ºä¾‹ä»“åº“

åœ¨ v3 ä¸­ï¼Œè®¸å¤š Transformers.js ç¤ºä¾‹é¡¹ç›®ç›´æŽ¥ä½äºŽä¸»ä»“åº“ä¸­ã€‚å¯¹äºŽ v4ï¼Œæˆ‘ä»¬å·²å°†å®ƒä»¬ç§»è‡³ä¸€ä¸ª**ä¸“ç”¨ä»“åº“**ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿç»´æŠ¤ä¸€ä¸ªä¸“æ³¨äºŽæ ¸å¿ƒåº“çš„æ›´ç®€æ´çš„ä»£ç åº“ã€‚è¿™ä¹Ÿä½¿ç”¨æˆ·æ›´å®¹æ˜“æ‰¾åˆ°ç¤ºä¾‹å¹¶ä¸ºå…¶åšå‡ºè´¡çŒ®ï¼Œè€Œæ— éœ€ç­›é€‰ä¸»ä»“åº“ã€‚

### Prettier

æˆ‘ä»¬æ›´æ–°äº† Prettier é…ç½®å¹¶é‡æ–°æ ¼å¼åŒ–äº†ä»“åº“ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚è¿™ç¡®ä¿äº†æ•´ä¸ªä»£ç åº“çš„æ ¼å¼ä¸€è‡´ï¼Œæ‰€æœ‰æœªæ¥çš„ PR éƒ½å°†è‡ªåŠ¨éµå¾ªç›¸åŒçš„é£Žæ ¼ã€‚ä¸å†éœ€è¦äº‰è®ºæ ¼å¼é—®é¢˜â€¦â€¦ Prettier å¤„ç†ä¸€åˆ‡ï¼Œä¸ºæ‰€æœ‰äººä¿æŒä»£ç çš„æ•´æ´å’Œå¯è¯»æ€§ã€‚

## æ–°æ¨¡åž‹ä¸Žæž¶æž„

å¾—ç›ŠäºŽæˆ‘ä»¬æ–°çš„å¯¼å‡ºç­–ç•¥ä»¥åŠ ONNX Runtime å¯¹è‡ªå®šä¹‰ç®—å­ä¸æ–­æ‰©å±•çš„æ”¯æŒï¼Œæˆ‘ä»¬èƒ½å¤Ÿå‘ Transformers.js v4 æ·»åŠ è®¸å¤šæ–°æ¨¡åž‹å’Œæž¶æž„ã€‚å…¶ä¸­åŒ…æ‹¬æµè¡Œçš„æ¨¡åž‹ï¼Œå¦‚ GPT-OSSã€Chatterboxã€GraniteMoeHybridã€LFM2-MoEã€HunYuanDenseV1ã€Apertusã€Olmo3ã€FalconH1 å’Œ Youtu-LLMã€‚å…¶ä¸­è®¸å¤šæ¨¡åž‹è¦æ±‚æˆ‘ä»¬å®žçŽ°å¯¹é«˜çº§æž¶æž„æ¨¡å¼çš„æ”¯æŒï¼ŒåŒ…æ‹¬ Mambaï¼ˆçŠ¶æ€ç©ºé—´æ¨¡åž‹ï¼‰ã€å¤šå¤´æ½œåœ¨æ³¨æ„åŠ›ï¼ˆMLAï¼‰å’Œä¸“å®¶æ··åˆï¼ˆMoEï¼‰ã€‚ä¹Ÿè®¸æœ€é‡è¦çš„æ˜¯ï¼Œè¿™äº›æ¨¡åž‹éƒ½ä¸Ž WebGPU å…¼å®¹ï¼Œå…è®¸ç”¨æˆ·åœ¨æµè§ˆå™¨æˆ–æœåŠ¡å™¨ç«¯ JavaScript çŽ¯å¢ƒä¸­ç›´æŽ¥è¿è¡Œå®ƒä»¬ï¼Œå¹¶äº«å—ç¡¬ä»¶åŠ é€Ÿã€‚æ•¬è¯·æœŸå¾…ä¸€äº›å±•ç¤ºè¿™äº›æ–°æ¨¡åž‹å®žé™…åº”ç”¨çš„ç²¾å½©æ¼”ç¤ºï¼

## æ–°çš„æž„å»ºç³»ç»Ÿ

æˆ‘ä»¬å·²ç»å°†æž„å»ºç³»ç»Ÿä»Ž Webpack è¿ç§»åˆ°äº† esbuildï¼Œç»“æžœä»¤äººæƒŠå¹ã€‚æž„å»ºæ—¶é—´ä»Ž 2 ç§’ä¸‹é™åˆ°ä»… 200 æ¯«ç§’ï¼Œæå‡äº† 10 å€ï¼Œä½¿å¾—å¼€å‘è¿­ä»£é€Ÿåº¦æ˜¾è‘—åŠ å¿«ã€‚é€Ÿåº¦å¹¶éžå”¯ä¸€çš„å¥½å¤„ï¼šæ‰€æœ‰æž„å»ºçš„åŒ…å¤§å°å¹³å‡å‡å°‘äº† 10%ã€‚æœ€æ˜¾è‘—çš„æ”¹è¿›æ˜¯æˆ‘ä»¬çš„é»˜è®¤å¯¼å‡º `transformers.web.js`ï¼Œå®ƒçŽ°åœ¨å°äº† 53%ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ä¸‹è½½æ›´å¿«ï¼Œå¯åŠ¨æ—¶é—´æ›´çŸ­ã€‚

## ç‹¬ç«‹çš„ Tokenizers.js åº“

ç”¨æˆ·ç»å¸¸è¦æ±‚å°†åˆ†è¯é€»è¾‘æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„åº“ä¸­ï¼Œè€Œåœ¨ v4 ä¸­ï¼Œæˆ‘ä»¬æ­£æ˜¯è¿™æ ·åšçš„ã€‚`@huggingface/tokenizers` æ˜¯å¯¹åˆ†è¯é€»è¾‘çš„å®Œå…¨é‡æž„ï¼Œæ—¨åœ¨è·¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ç«¯è¿è¡Œæ—¶æ— ç¼å·¥ä½œã€‚å®ƒä»…æœ‰ 8.8kBï¼ˆgzip åŽ‹ç¼©åŽï¼‰ä¸”é›¶ä¾èµ–ï¼Œæžå…¶è½»é‡ï¼ŒåŒæ—¶ä¿æŒå®Œå…¨çš„ç±»åž‹å®‰å…¨ã€‚

```javascript
import { Tokenizer } from "@huggingface/tokenizers";


const modelId = "HuggingFaceTB/SmolLM3-3B";
const tokenizerJson = await fetch(
  `https://huggingface.co/${modelId}/resolve/main/tokenizer.json`
).then(res => res.json());

const tokenizerConfig = await fetch(
  `https://huggingface.co/${modelId}/resolve/main/tokenizer_config.json`
).then(res => res.json());


const tokenizer = new Tokenizer(tokenizerJson, tokenizerConfig);


const tokens = tokenizer.tokenize("Hello World");


const encoded = tokenizer.encode("Hello World");


```

è¿™ç§åˆ†ç¦»ä½¿ Transformers.js çš„æ ¸å¿ƒä¿æŒä¸“æ³¨å’Œç²¾ç®€ï¼ŒåŒæ—¶æä¾›äº†ä¸€ä¸ªå¤šåŠŸèƒ½ã€ç‹¬ç«‹çš„å·¥å…·ï¼Œä»»ä½• WebML é¡¹ç›®éƒ½å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ã€‚

## å…¶ä»–æ”¹è¿›

æˆ‘ä»¬åœ¨æ•´ä¸ªåº“ä¸­è¿›è¡Œäº†å¤šé¡¹æå‡æ˜“ç”¨æ€§çš„æ”¹è¿›ã€‚ç±»åž‹ç³»ç»Ÿé€šè¿‡åŸºäºŽè¾“å…¥åŠ¨æ€è°ƒæ•´çš„ç®¡é“ç±»åž‹å¾—åˆ°äº†å¢žå¼ºï¼Œæä¾›äº†æ›´å¥½çš„å¼€å‘è€…ä½“éªŒå’Œç±»åž‹å®‰å…¨ã€‚

![ç±»åž‹æ”¹è¿›](/images/posts/4ff9623d4d0c.png)

æ—¥å¿—è®°å½•å¾—åˆ°äº†æ”¹è¿›ï¼Œä½¿ç”¨æˆ·åœ¨æ¨¡åž‹æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰æ›´å¤šæŽ§åˆ¶å’Œæ›´æ¸…æ™°çš„åé¦ˆã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¢žåŠ äº†å¯¹è¶…è¿‡ 80 äº¿å‚æ•°çš„å¤§åž‹æ¨¡åž‹çš„æ”¯æŒã€‚åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ M4 Pro Max ä¸Šä»¥çº¦æ¯ç§’ 60 ä¸ª Token çš„é€Ÿåº¦è¿è¡Œ GPT-OSS 20Bï¼ˆq4f16ï¼‰ã€‚

## è‡´è°¢

æˆ‘ä»¬è¡·å¿ƒæ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªä¸»è¦ç‰ˆæœ¬åšå‡ºè´¡çŒ®çš„äººï¼Œç‰¹åˆ«æ˜¯ ONNX Runtime å›¢é˜Ÿï¼Œæ„Ÿè°¢ä»–ä»¬åœ¨æ–°çš„ WebGPU è¿è¡Œæ—¶ä¸Šçš„å‡ºè‰²å·¥ä½œä»¥åŠåœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ç»™äºˆçš„æ”¯æŒï¼ŒåŒæ—¶ä¹Ÿæ„Ÿè°¢æ‰€æœ‰å¤–éƒ¨è´¡çŒ®è€…å’Œæ—©æœŸæµ‹è¯•è€…ã€‚

---

> æœ¬æ–‡ç”±AIè‡ªåŠ¨ç¿»è¯‘ï¼ŒåŽŸæ–‡é“¾æŽ¥ï¼š[Transformers.js v4 Preview: Now Available on NPM!](https://huggingface.co/blog/transformersjs-v4)
> 
> ç¿»è¯‘æ—¶é—´ï¼š2026-02-10 04:33
